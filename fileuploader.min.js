/*! fileuploader 0.1.8 by Dorian Nowak | 2015-10-26 */
!function(a,b){var c=0,d=null,e=null,f=new XMLHttpRequest,g=new FormData,h="file",i=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},j=function(){if(f=new XMLHttpRequest,f.open("post",e.url,!0),f.fu={uuid:i(),file:null},null!=d&&(g.append(h,d.files[c]),f.fu.file=d.files[c],f.timeout=e.timeout,e.onprogress&&"function"==typeof e.onprogress&&f.upload.addEventListener("progress",function(a){e.onprogress(a,f)},!1),e.onsubmit&&"function"==typeof e.onsubmit&&e.onsubmit(f),e.oncomplete&&"function"==typeof e.oncomplete&&f.addEventListener("loadend",function(){var a=this.getResponseHeader("content-type"),b=this.response;if("application/json"==a)try{b=JSON.parse(b)}catch(f){}e.oncomplete(b,this.status,this),d.files.length==c+1&&e["finally"]&&"function"==typeof e["finally"]&&e["finally"]()},!1),e.onerror&&"function"==typeof e.onerror&&f.addEventListener("error",function(){var a=this.getResponseHeader("content-type"),b=this.response;if("application/json"==a)try{b=JSON.parse(b)}catch(c){}e.onerror(b,this.status,this)},!1),e.ontimeout&&"function"==typeof e.ontimeout&&f.addEventListener("timeout",function(){e.ontimeout(this,this.status)},!1)),e.headers)for(key in e.headers)f.setRequestHeader(key,e.headers[key]);if(e.data)if(e.dataType&&"array"==e.dataType)for(key in e.data)g.append(e.data[key].name,e.data[key].value);else for(key in e.data)g.append(key,e.data[key]);f.addEventListener("loadend",function(){k()},!1)};a.fileuploader=function(a){return"object"!=typeof a?null:(g=new FormData,e=a,d=document.querySelector(a.selector),a.file_input_name&&(h=a.file_input_name),j(),f.send(g),void 0)};var k=function(){d.files.length>1&&(c+=1,d.files[c]!=b?(delete f,f=new XMLHttpRequest,g=new FormData,g.append(h,d.files[c]),j(),f.send(g),delete g):(c=0,d.value=""))}}(window);