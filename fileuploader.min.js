// fileuploader.js v0.1.2 by Dorian Nowak
(function(g,h){var c=0,e=null,a=null,b=new XMLHttpRequest,d=new FormData,f=function(){b=new XMLHttpRequest;b.open("post",a.url,!0);null!=e&&(d.append("file",e.files[c]),b.timeout=a.timeout,a.onprogress&&"function"==typeof a.onprogress&&b.upload.addEventListener("progress",a.onprogress,!1),a.oncomplete&&"function"==typeof a.oncomplete&&b.addEventListener("loadend",function(){a.oncomplete(this.response,this.status,this)},!1),a.onerror&&"function"==typeof a.onerror&&b.addEventListener("error",function(){a.onerror(this,
this.status)},!1),a.ontimeout&&"function"==typeof a.ontimeout&&b.addEventListener("timeout",function(){a.ontimeout(this,this.status)},!1));if(a.headers)for(key in a.headers)b.setRequestHeader(key,a.headers[key]);if(a.data)for(key in a.data)d.append(key,a.data[key]);b.addEventListener("loadend",function(a){1<e.files.length&&(c+=1,e.files[c]!=h?(delete b,b=new XMLHttpRequest,d=new FormData,d.append("file",e.files[c]),f(),b.send(d),delete d):(c=0,e.value=""))},!1)};g.fileuploader=function(c){if("object"==
typeof c)d=new FormData,a=c,e=document.querySelector(c.selector),f(),b.send(d);else return null}})(window);