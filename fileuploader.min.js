/*! fileuploader 0.1.4dev by Dorian Nowak | 2015-01-29 */
!function(a,b){var c=0,d=null,e=null,f=new XMLHttpRequest,g=new FormData,h=function(){if(f=new XMLHttpRequest,f.open("post",e.url,!0),null!=d&&(g.append("file",d.files[c]),f.timeout=e.timeout,e.onprogress&&"function"==typeof e.onprogress&&f.upload.addEventListener("progress",e.onprogress,!1),e.oncomplete&&"function"==typeof e.oncomplete&&f.addEventListener("loadend",function(){var a=this.getResponseHeader("content-type"),b=this.response;if("application/json"==a)try{b=JSON.parse(b)}catch(c){}e.oncomplete(b,this.status,this)},!1),e.onerror&&"function"==typeof e.onerror&&f.addEventListener("error",function(){var a=this.getResponseHeader("content-type"),b=this.response;if("application/json"==a)try{b=JSON.parse(b)}catch(c){}e.onerror(b,this.status,this)},!1),e.ontimeout&&"function"==typeof e.ontimeout&&f.addEventListener("timeout",function(){e.ontimeout(this,this.status)},!1)),e.headers)for(key in e.headers)f.setRequestHeader(key,e.headers[key]);if(e.data)for(key in e.data)g.append(key,e.data[key]);f.addEventListener("loadend",function(){i()},!1)};a.fileuploader=function(a){return"object"!=typeof a?null:(g=new FormData,e=a,d=document.querySelector(a.selector),h(),f.send(g),void 0)};var i=function(){d.files.length>1&&(c+=1,d.files[c]!=b?(delete f,f=new XMLHttpRequest,g=new FormData,g.append("file",d.files[c]),h(),f.send(g),delete g):(c=0,d.value=""))}}(window);